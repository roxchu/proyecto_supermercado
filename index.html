<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Supermercado Online</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <base href="/proyecto_supermercado/">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <div class="logo">
                <a href="index.html" class="logo-link">
                    <h1><i class="fas fa-store"></i> Supermercado Online</h1>
                </a>
            </div>
            <button class="menu-button" id="btn-categorias" aria-expanded="false">
                <i class="fas fa-bars"></i> Categorías
            </button>
        </div>

        <div class="search-bar">
            <input type="text" placeholder="Buscar productos..." aria-label="Buscar productos">
            <button type="button"><i class="fas fa-search"></i></button>
        </div>

        <div class="user-actions">
            <!-- PANEL DE GESTIÓN (EMPLEADO) -->
            <!-- href absolute to allow no-JS fallback; JS will protect navigation -->
            <a href="/proyecto_supermercado/paneles/dashboard_empleado.php" id="link-gestion" class="employee-only action-link" style="display:none;" title="Panel de Gestión">
                <i class="fas fa-truck-loading"></i>
                <span class="action-text">Gestión</span>
            </a>
            
            <!-- PANEL DE ADMINISTRACIÓN (ADMIN) -->
            <a href="/proyecto_supermercado/paneles/dashboard_admin.php" id="link-admin" class="admin-only action-link" style="display:none;" title="Administración">
                <i class="fas fa-tools"></i>
                <span class="action-text">Admin</span>
            </a>

            <!-- BOTÓN DE LOGIN (visible cuando NO hay sesión) -->
            <a href="#" id="login-link" class="action-link" title="Iniciar sesión">
                <i class="fas fa-user"></i>
                <span class="action-text">Iniciar sesión</span>
            </a>

            <!-- INFO DE USUARIO (visible cuando HAY sesión) -->
            <div id="user-info" class="user-info-container" style="display:none;">
                <span id="user-greeting" class="user-greeting"></span>
                <a href="#" id="logout-link" class="action-link" title="Cerrar sesión">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="action-text">Salir</span>
                </a>
            </div>

            <!-- CARRITO -->
            <div class="cart action-link" title="Mi Carrito">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-count">0</span>
            </div>
        </div>
    </header>

    <aside id="side-menu" class="side-menu" aria-hidden="true">
        <div class="side-menu-header">
            <h2><i class="fas fa-list-alt"></i> Todas las Categorías</h2>
            <button id="btn-close-menu" class="close-menu" aria-label="Cerrar Menú">&times;</button>
        </div>
        <nav class="side-nav">
            <ul>
                <li><a href="index.html" class="side-link"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="#" class="side-link"><i class="fas fa-tags"></i> Ofertas</a></li>
                <li><a href="#" class="side-link"><i class="fas fa-cocktail"></i> Bebidas</a></li>
                <li><a href="#" class="side-link"><i class="fas fa-soap"></i> Limpieza</a></li>
                <li><a href="#" class="side-link"><i class="fas fa-carrot"></i> Frutas y Verduras</a></li>
                <li><a href="#" class="side-link"><i class="fas fa-cookie-bite"></i> Panadería</a></li>
                <li><a href="#" class="side-link"><i class="fas fa-utensils"></i> Congelados</a></li>
                <li><a href="/proyecto_supermercado/paneles/dashboard_empleado.php" class="side-link employee-only" style="display:none;"><i class="fas fa-boxes"></i> Gestión de stock</a></li>
                <li><a href="/proyecto_supermercado/paneles/dashboard_admin.php" class="side-link admin-only" style="display:none;"><i class="fas fa-cog"></i> Panel de admin</a></li>
            </ul>
        </nav>
    </aside>
    
    <div id="menu-overlay" class="menu-overlay"></div>

    <main class="main-content">
        <h2>Productos destacados</h2>

        <div class="carrusel-container">
            <button class="carrusel-btn prev">‹</button> 
            <div class="carousel-track" id="carrusel-dinamico-container">
                <p style="text-align:center; color: #555;">Cargando productos...</p>
            </div>
            <button class="carrusel-btn next">›</button>
        </div>
    </main>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modal-title">Iniciar Sesión</h2>

            <form id="login-form-dni">
                <input type="text" id="dni" name="dni" placeholder="DNI" required />
                <button type="submit">Ingresar</button>
                <p id="login-message"></p>
                <p>¿No tienes cuenta? <a href="#" id="show-register">Registrate</a></p>
            </form>

            <form id="register-form" style="display:none;">
                <input type="text" id="reg-dni" name="dni" placeholder="DNI" required />
                <input type="text" id="nombre" name="nombre" placeholder="Nombre completo" required />
                <input type="email" id="correo" name="correo" placeholder="Correo electrónico" required />
                <button type="submit">Crear cuenta</button>
                <p id="register-message"></p>
                <p>¿Ya tienes cuenta? <a href="#" id="show-login">Inicia sesión</a></p>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>